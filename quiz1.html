<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>20251231å¹´åº¦å›é¡§ ğŸ‰ğŸ“±</title>
  <style>
    :root{
      --bg:#f5f6f8;
      --card:#ffffff;
      --text:#111827;
      --muted:#6b7280;
      --line:#e5e7eb;
      --blue:#2563eb;
      --green:#16a34a;
      --red:#ef4444;
      --good-bg:#dcfce7;
      --bad-bg:#fee2e2;
      --opt-bg:#f3f4f6;
      --shadow:0 12px 30px rgba(0,0,0,.08);
      --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "Microsoft JhengHei", Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:var(--bg);
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      line-height:1.45;
    }
    .wrap{
      max-width:760px;
      margin:0 auto;
      padding:18px 14px 28px;
    }
    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      margin:6px 0 12px;
    }
    .title{
      font-weight:800;
      font-size:22px;
      letter-spacing:.2px;
    }
    .subtitle{
      color:var(--muted);
      font-size:13px;
      margin-top:2px;
    }
    .topbar{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:12px 12px;
      display:flex;
      align-items:center;
      gap:12px;
      box-shadow: var(--shadow);
    }
    .progress-col{flex:1; min-width:0}
    .progress-row{display:flex; align-items:center; gap:10px}
    .progress-track{
      position:relative;
      height:10px;
      border-radius:999px;
      background:#dbeafe;
      overflow:hidden;
      flex:1;
    }
    .progress-fill{
      position:absolute; inset:0;
      width:0%;
      background:var(--blue);
      border-radius:999px;
      transition:width .25s ease;
    }
    .progress-dot{
      position:absolute;
      top:50%;
      transform:translate(-50%,-50%);
      width:18px; height:18px;
      border-radius:999px;
      background:var(--blue);
      box-shadow:0 8px 18px rgba(37,99,235,.25);
      left:0%;
      transition:left .25s ease;
    }
    .pills{display:flex; gap:8px; align-items:center; white-space:nowrap}
    .pill{
      padding:7px 10px;
      border-radius:999px;
      font-weight:700;
      font-size:12px;
      border:1px solid var(--line);
      background:#fff;
      display:flex; align-items:center; gap:7px;
    }
    .pill.good{background:var(--good-bg); border-color:#bbf7d0; color:#14532d}
    .pill.bad{background:var(--bad-bg); border-color:#fecaca; color:#7f1d1d}
    .pill .num{font-size:13px}
    .card{
      margin-top:12px;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .card-head{
      padding:16px 16px 8px;
    }
    .meta{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
      color:var(--muted);
      font-size:12px;
      font-weight:650;
    }
    .tag{
      padding:4px 10px;
      border-radius:999px;
      background:#eff6ff;
      color:#1d4ed8;
      border:1px solid #dbeafe;
      font-weight:800;
    }
    .q{
      font-size:18px;
      font-weight:800;
      margin:0 0 4px;
    }
    .opts{padding:6px 12px 14px; display:flex; flex-direction:column; gap:10px}
    .opt{
      width:100%;
      text-align:left;
      border:1px solid var(--line);
      background:var(--opt-bg);
      border-radius:14px;
      padding:14px 14px;
      font-size:16px;
      font-weight:750;
      display:flex;
      gap:10px;
      align-items:flex-start;
      cursor:pointer;
      transition:transform .03s ease, border-color .2s ease, background .2s ease;
    }
    .opt:active{transform:scale(.995)}
    .opt[disabled]{cursor:default; opacity:1}
    .opt .label{
      width:26px; flex:0 0 26px;
      height:26px;
      border-radius:999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background:#e5e7eb;
      color:#111827;
      font-weight:900;
      margin-top:1px;
    }
    .opt.correct{background:var(--good-bg); border-color:#86efac}
    .opt.wrong{background:var(--bad-bg); border-color:#fca5a5}
    .opt.dim{opacity:.62}
    .feedback{
      margin:0 16px 14px;
      border-radius:14px;
      padding:12px 12px;
      border:1px solid var(--line);
      display:none;
    }
    .feedback.good{background:var(--good-bg); border-color:#bbf7d0}
    .feedback.bad{background:var(--bad-bg); border-color:#fecaca}
    .fb-title{font-weight:900; margin-bottom:6px}
    .fb-text{color:#111827; font-weight:650}
    .nav{
      display:flex;
      gap:10px;
      padding:14px 14px 16px;
      border-top:1px solid var(--line);
      background:linear-gradient(#fff, #fbfbfd);
    }
    .btn{
      flex:1;
      border-radius:999px;
      padding:13px 14px;
      font-size:15px;
      font-weight:850;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
    }
    .btn.primary{background:var(--blue); border-color:var(--blue); color:#fff}
    .btn:disabled{opacity:.55; cursor:default}
    .toast{
      position:fixed;
      left:50%;
      bottom:16px;
      transform:translateX(-50%);
      background:#111827;
      color:#fff;
      padding:10px 12px;
      border-radius:999px;
      font-weight:750;
      font-size:13px;
      box-shadow:0 14px 34px rgba(0,0,0,.22);
      display:none;
      z-index:50;
      max-width:90vw;
      text-align:center;
    }
    .result{
      margin-top:12px;
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
      padding:16px;
      display:none;
    }
    .result h2{margin:0 0 6px; font-size:20px}
    .result .big{font-weight:900; font-size:34px; margin:4px 0 10px}
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap:10px;
      margin-top:10px;
    }
    .mini{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background:#fff;
    }
    .mini .y{font-weight:900}
    .mini .s{color:var(--muted); font-weight:700; margin-top:4px}
    @media (max-width:420px){
      .title{font-size:20px}
      .q{font-size:17px}
      .opt{font-size:15px}
      .grid{grid-template-columns: 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <div class="title">20251231å¹´åº¦å›é¡§ ğŸ‰ğŸ“±ğŸ§ </div>
        <div class="subtitle">å¾ 2021 åˆ° 2025ï¼ŒæŠŠèŠå¤©çš„å›æ†¶åšæˆä¸€ä»½å°æ¸¬é©—</div>
      </div>
    </header>

    <div class="topbar" id="topbar">
      <div class="progress-col">
        <div class="progress-row">
          <div class="progress-track" aria-label="progress">
            <div class="progress-fill" id="progressFill"></div>
            <div class="progress-dot" id="progressDot"></div>
          </div>
          <div style="font-weight:900; color:#111827; min-width:64px; text-align:right" id="progressText">0/0</div>
        </div>
      </div>
      <div class="pills">
        <div class="pill bad" title="ç­”éŒ¯"><span>âœ—</span><span class="num" id="wrongCount">0</span></div>
        <div class="pill good" title="ç­”å°"><span>âœ“</span><span class="num" id="rightCount">0</span></div>
      </div>
    </div>

    <div class="card" id="card">
      <div class="card-head">
        <div class="meta">
          <div><span id="qIndex">ç¬¬ 1 é¡Œ</span> Â· <span id="qTotal">å…± 0 é¡Œ</span></div>
          <div class="tag" id="yearTag">2021</div>
        </div>
        <div class="q" id="qText"></div>
      </div>

      <div class="opts" id="opts"></div>

      <div class="feedback" id="feedback">
        <div class="fb-title" id="fbTitle"></div>
        <div class="fb-text" id="fbText"></div>
      </div>

      <div class="nav">
        <button class="btn" id="btnBack">è¿”å›</button>
        <button class="btn primary" id="btnNext">ä¸‹ä¸€é¡Œ</button>
      </div>
    </div>

    <div class="result" id="result">
      <h2>å®Œæˆå•¦ ğŸŠ</h2>
      <div class="big" id="finalScore"></div>
      <div style="color:var(--muted); font-weight:700" id="finalDetail"></div>

      <div class="grid" id="yearBreakdown"></div>

      <div style="margin-top:14px; display:flex; gap:10px">
        <button class="btn" id="btnReview">å›åˆ°é¡Œç›®</button>
        <button class="btn primary" id="btnRestart">å†ç©ä¸€æ¬¡</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast">è«‹å…ˆä½œç­”å†å‰å¾€ä¸‹ä¸€é¡Œ</div>

  <script type="application/json" id="quiz-data">[{"id": 1, "year": 2021, "q": "2021ï½œé€™ä¸€å¹´èª°æœ€å¸¸åœ¨ç¾¤çµ„å‡ºè²ï¼Ÿ", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 2, "explain": "çµ±è¨ˆ 2021 å¹´è¨Šæ¯æ•¸ï¼šæ˜€æ¾¤ 7,142ã€ç‹æŒ¯å®‡ 1,213ã€é™³æ³“å»· 8,149ã€é„­æ™¯ç³ 6,819ã€‚"}, {"id": 2, "year": 2021, "q": "2021ï½œèŠå¤©æœ€å®¹æ˜“çˆ†é‡çš„æ™‚æ®µå¤§ç´„è½åœ¨å¹¾é»ï¼Ÿâ°", "choices": ["å‡Œæ™¨ 12 é»å·¦å³", "ä¸‹åˆ 1 é»å·¦å³", "æ™šä¸Š 6 é»å·¦å³", "æ™šä¸Š 11 é»å·¦å³"], "correct": 3, "explain": "2021 å¹´è¨Šæ¯é‡æœ€é«˜å³°è½åœ¨ 23 é»ï¼ˆæ™šä¸Š 11 é»å·¦å³ï¼‰ã€‚"}, {"id": 3, "year": 2021, "q": "2021ï½œå¤œæ·±äº†ï¼Œä¸‹é¢å“ªå€‹è©åœ¨é€™ä¸€å¹´ç‰¹åˆ¥å¸¸è¢«æåˆ°ï¼ŸğŸŒ™", "choices": ["æ©Ÿå™¨å­¸ç¿’", "ç¢ºè¨º", "å®µå¤œ", "è·¯æ˜“è"], "correct": 2, "explain": "2021 å¹´å«ã€Œå®µå¤œã€çš„è¨Šæ¯å…±æœ‰ 48 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2021-01-03ã€‚"}, {"id": 4, "year": 2021, "q": "2021ï½œé€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿã€Œä¾†ä¸åŠäº† åŸæœ¬è¦å•ä½ è¦ä¸è¦åƒå®µå¤œã€", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 2, "explain": "å‡ºè‡ª 2021-03-20ã€‚"}, {"id": 5, "year": 2021, "q": "2021ï½œé‚£å¹´å¸¸è¢«é»åçš„å¤–é£Ÿä¹‹ä¸€æ˜¯ï¼ŸğŸœ", "choices": ["éº»è¾£ç‡™", "ç¢ºè¨º", "æ©Ÿå™¨å­¸ç¿’", "è·¯æ˜“è"], "correct": 0, "explain": "2021 å¹´å«ã€Œéº»è¾£ç‡™ã€çš„è¨Šæ¯å…±æœ‰ 15 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2021-01-04ã€‚"}, {"id": 6, "year": 2022, "q": "2022ï½œé€™ä¸€å¹´èª°æœ€å¸¸åœ¨ç¾¤çµ„å‡ºè²ï¼Ÿ", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 3, "explain": "çµ±è¨ˆ 2022 å¹´è¨Šæ¯æ•¸ï¼šæ˜€æ¾¤ 5,033ã€ç‹æŒ¯å®‡ 254ã€é™³æ³“å»· 6,059ã€é„­æ™¯ç³ 6,553ã€‚"}, {"id": 7, "year": 2022, "q": "2022ï½œèŠå¤©æœ€å®¹æ˜“çˆ†é‡çš„æ™‚æ®µå¤§ç´„è½åœ¨å¹¾é»ï¼Ÿâ°", "choices": ["ä¸‹åˆ 1 é»å·¦å³", "æ™šä¸Š 8 é»å·¦å³", "å‡Œæ™¨ 12 é»å·¦å³", "æ™šä¸Š 6 é»å·¦å³"], "correct": 2, "explain": "2022 å¹´è¨Šæ¯é‡æœ€é«˜å³°è½åœ¨ 00 é»ï¼ˆå‡Œæ™¨ 12 é»å·¦å³ï¼‰ã€‚"}, {"id": 8, "year": 2022, "q": "2022ï½œé‚£å¹´å¸¸è¢«ç´„å»/æåˆ°çš„åœ°é»æ˜¯å“ªå€‹ï¼ŸğŸ“", "choices": ["éº»è¾£ç‡™", "å®µå¤œ", "è·¯æ˜“è", "å°ç©"], "correct": 2, "explain": "2022 å¹´å«ã€Œè·¯æ˜“èã€çš„è¨Šæ¯å…±æœ‰ 68 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2022-04-04ã€‚"}, {"id": 9, "year": 2022, "q": "2022ï½œé€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿã€Œä½†æˆ‘åƒå®Œåˆé¤æ‡‰è©²å°±è¦èµ°äº† æ‰€ä»¥å°±çœ‹ä½ é‚„è¦ä¸è¦ç¹¼çºŒå¾…åœ¨è·¯æ˜“èã€", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 3, "explain": "å‡ºè‡ª 2022-10-07ã€‚"}, {"id": 10, "year": 2022, "q": "2022ï½œé‚£å¹´ä¹Ÿå¸¸èŠåˆ°çš„é˜²ç–«é—œéµå­—æ˜¯ï¼ŸğŸ˜·", "choices": ["éº»è¾£ç‡™", "å°ç©", "å®µå¤œ", "ç¢ºè¨º"], "correct": 3, "explain": "2022 å¹´å«ã€Œç¢ºè¨ºã€çš„è¨Šæ¯å…±æœ‰ 44 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2022-01-25ã€‚"}, {"id": 11, "year": 2023, "q": "2023ï½œé€™ä¸€å¹´èª°æœ€å¸¸åœ¨ç¾¤çµ„å‡ºè²ï¼Ÿ", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 3, "explain": "çµ±è¨ˆ 2023 å¹´è¨Šæ¯æ•¸ï¼šæ˜€æ¾¤ 3,927ã€ç‹æŒ¯å®‡ 117ã€é™³æ³“å»· 3,351ã€é„­æ™¯ç³ 4,002ã€‚"}, {"id": 12, "year": 2023, "q": "2023ï½œèŠå¤©æœ€å®¹æ˜“çˆ†é‡çš„æ™‚æ®µå¤§ç´„è½åœ¨å¹¾é»ï¼Ÿâ°", "choices": ["æ™šä¸Š 8 é»å·¦å³", "ä¸‹åˆ 1 é»å·¦å³", "å‡Œæ™¨ 12 é»å·¦å³", "æ™šä¸Š 6 é»å·¦å³"], "correct": 1, "explain": "2023 å¹´è¨Šæ¯é‡æœ€é«˜å³°è½åœ¨ 13 é»ï¼ˆä¸‹åˆ 1 é»å·¦å³ï¼‰ã€‚"}, {"id": 13, "year": 2023, "q": "2023ï½œé‚£å¹´åœ¨èª²æ¥­/æŠ€è¡“è¨è«–è£¡å¾ˆå¸¸å‡ºç¾çš„é—œéµå­—æ˜¯ï¼ŸğŸ“š", "choices": ["æ©Ÿå™¨å­¸ç¿’", "å¯¦é©—å®¤", "å°ç©", "æ¥“ä¹‹è°·"], "correct": 0, "explain": "2023 å¹´å«ã€Œæ©Ÿå™¨å­¸ç¿’ã€çš„è¨Šæ¯å…±æœ‰ 24 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2023-03-06ã€‚"}, {"id": 14, "year": 2023, "q": "2023ï½œé€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿã€Œä»–è·Ÿä»–åŒå±†çš„è™•çš„ä¸å¤ªå¥½ç„¶å¾Œç¾åœ¨è·Ÿæ©Ÿå™¨å­¸ç¿’çš„æ±è¥¿è·Ÿçš„å¾ˆç´¯ã€", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 0, "explain": "å‡ºè‡ª 2023-08-21ã€‚"}, {"id": 15, "year": 2023, "q": "2023ï½œé‚£å¹´å¤§å®¶å¸¸æåˆ°çš„ç§‘ç›®ä¹‹ä¸€æ˜¯ï¼ŸğŸ§ ", "choices": ["ç¢ºè¨º", "é›»ç£å­¸", "ç„¡å¡µå®¤", "æ¥“ä¹‹è°·"], "correct": 1, "explain": "2023 å¹´å«ã€Œé›»ç£å­¸ã€çš„è¨Šæ¯å…±æœ‰ 21 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2023-01-09ã€‚"}, {"id": 16, "year": 2024, "q": "2024ï½œé€™ä¸€å¹´èª°æœ€å¸¸åœ¨ç¾¤çµ„å‡ºè²ï¼Ÿ", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 2, "explain": "çµ±è¨ˆ 2024 å¹´è¨Šæ¯æ•¸ï¼šæ˜€æ¾¤ 2,911ã€ç‹æŒ¯å®‡ 128ã€é™³æ³“å»· 5,460ã€é„­æ™¯ç³ 4,262ã€‚"}, {"id": 17, "year": 2024, "q": "2024ï½œèŠå¤©æœ€å®¹æ˜“çˆ†é‡çš„æ™‚æ®µå¤§ç´„è½åœ¨å¹¾é»ï¼Ÿâ°", "choices": ["å‡Œæ™¨ 12 é»å·¦å³", "æ™šä¸Š 6 é»å·¦å³", "ä¸‹åˆ 1 é»å·¦å³", "æ™šä¸Š 8 é»å·¦å³"], "correct": 1, "explain": "2024 å¹´è¨Šæ¯é‡æœ€é«˜å³°è½åœ¨ 18 é»ï¼ˆæ™šä¸Š 6 é»å·¦å³ï¼‰ã€‚"}, {"id": 18, "year": 2024, "q": "2024ï½œé‚£å¹´èŠåˆ°å·¥ä½œ/ç’°å¢ƒæ™‚å¸¸å‡ºç¾çš„é—œéµè©æ˜¯ï¼ŸğŸ§ª", "choices": ["å¯¦é©—å®¤", "ç„¡å¡µå®¤", "å°ç©", "å®µå¤œ"], "correct": 1, "explain": "2024 å¹´å«ã€Œç„¡å¡µå®¤ã€çš„è¨Šæ¯å…±æœ‰ 21 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2024-01-08ã€‚"}, {"id": 19, "year": 2024, "q": "2024ï½œé€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿã€Œç¢ºå¯¦ æˆ‘ä»¥ç‚ºå°ç©å°±è·Ÿæˆ‘ç¾åœ¨å¾ˆåƒ ä¸æ˜¯ç„¡å¡µå®¤å°±æ˜¯åœ¨ç„¡å¡µå®¤çš„è·¯ä¸Šã€", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 3, "explain": "å‡ºè‡ª 2024-07-02ã€‚"}, {"id": 20, "year": 2024, "q": "2024ï½œé‚£å¹´æœ€å¸¸è¢«æåˆ°çš„éŠæˆ²æ˜¯å“ªå€‹ï¼ŸğŸ®", "choices": ["æ©Ÿå™¨å­¸ç¿’", "æ¥“ä¹‹è°·", "å¯¦é©—å®¤", "é›»ç£å­¸"], "correct": 1, "explain": "2024 å¹´å«ã€Œæ¥“ä¹‹è°·ã€çš„è¨Šæ¯å…±æœ‰ 40 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2024-02-02ã€‚"}, {"id": 21, "year": 2025, "q": "2025ï½œé€™ä¸€å¹´èª°æœ€å¸¸åœ¨ç¾¤çµ„å‡ºè²ï¼Ÿ", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 2, "explain": "çµ±è¨ˆ 2025 å¹´è¨Šæ¯æ•¸ï¼šæ˜€æ¾¤ 2,271ã€ç‹æŒ¯å®‡ 80ã€é™³æ³“å»· 3,313ã€é„­æ™¯ç³ 2,323ã€‚"}, {"id": 22, "year": 2025, "q": "2025ï½œèŠå¤©æœ€å®¹æ˜“çˆ†é‡çš„æ™‚æ®µå¤§ç´„è½åœ¨å¹¾é»ï¼Ÿâ°", "choices": ["æ™šä¸Š 6 é»å·¦å³", "å‡Œæ™¨ 12 é»å·¦å³", "æ™šä¸Š 8 é»å·¦å³", "ä¸‹åˆ 1 é»å·¦å³"], "correct": 2, "explain": "2025 å¹´è¨Šæ¯é‡æœ€é«˜å³°è½åœ¨ 20 é»ï¼ˆæ™šä¸Š 8 é»å·¦å³ï¼‰ã€‚"}, {"id": 23, "year": 2025, "q": "2025ï½œé‚£å¹´æ—¥å¸¸çš„ä¸»è¦èˆå°æ˜¯ï¼ŸğŸ§·", "choices": ["å®µå¤œ", "è·¯æ˜“è", "å¯¦é©—å®¤", "éº»è¾£ç‡™"], "correct": 2, "explain": "2025 å¹´å«ã€Œå¯¦é©—å®¤ã€çš„è¨Šæ¯å…±æœ‰ 39 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2025-01-04ã€‚"}, {"id": 24, "year": 2025, "q": "2025ï½œé€™å¥è©±æ˜¯èª°èªªçš„ï¼Ÿã€Œä½ æ˜¯ç•¶å¤©å°±å¯„ä¿¡è·Ÿä»–èªªæƒ³è¦é€²ä»–å¯¦é©—å®¤é‚„æ˜¯ä¹‹å¾Œæ‰å¯„ã€", "choices": ["æ˜€æ¾¤", "ç‹æŒ¯å®‡", "é™³æ³“å»·", "é„­æ™¯ç³"], "correct": 0, "explain": "å‡ºè‡ª 2025-11-10ã€‚"}, {"id": 25, "year": 2025, "q": "2025ï½œé‚£å¹´æœ€å¸¸å‡ºç¾çš„å…¬å¸é—œéµå­—æ˜¯ï¼ŸğŸ­", "choices": ["ç„¡å¡µå®¤", "å°ç©", "æ©Ÿå™¨å­¸ç¿’", "é›»ç£å­¸"], "correct": 1, "explain": "2025 å¹´å«ã€Œå°ç©ã€çš„è¨Šæ¯å…±æœ‰ 53 å‰‡ï¼Œæœ€æ—©å¯è¿½åˆ° 2025-01-15ã€‚"}]</script>
  <script>
    const QUIZ = JSON.parse(document.getElementById('quiz-data').textContent);
    const N = QUIZ.length;

    const el = (id) => document.getElementById(id);
    const progressFill = el('progressFill');
    const progressDot  = el('progressDot');
    const progressText = el('progressText');
    const rightCountEl = el('rightCount');
    const wrongCountEl = el('wrongCount');

    const qIndexEl = el('qIndex');
    const qTotalEl = el('qTotal');
    const yearTagEl = el('yearTag');
    const qTextEl  = el('qText');
    const optsEl   = el('opts');

    const feedbackEl = el('feedback');
    const fbTitleEl  = el('fbTitle');
    const fbTextEl   = el('fbText');

    const btnBack = el('btnBack');
    const btnNext = el('btnNext');

    const cardEl   = el('card');
    const resultEl = el('result');

    const toastEl = el('toast');

    const STORAGE_KEY = "quiz_20251231_state_v1";

    let state = {
      i: 0,
      answers: Array(N).fill(null),   // selected index
      corrects: Array(N).fill(null),  // true/false
    };

    function saveState() {
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(state)); } catch (e) {}
    }
    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return;
        const s = JSON.parse(raw);
        if (!s || !Array.isArray(s.answers) || s.answers.length !== N) return;
        state = s;
      } catch (e) {}
    }
    function clearState() {
      try { localStorage.removeItem(STORAGE_KEY); } catch (e) {}
    }

    function toast(msg) {
      toastEl.textContent = msg;
      toastEl.style.display = "block";
      clearTimeout(toast._t);
      toast._t = setTimeout(() => toastEl.style.display = "none", 1200);
    }

    function score() {
      let r=0, w=0;
      for (let k=0;k<N;k++) {
        if (state.corrects[k] === true) r++;
        else if (state.corrects[k] === false) w++;
      }
      return {r,w};
    }

    function setProgress() {
      const {r,w} = score();
      rightCountEl.textContent = r;
      wrongCountEl.textContent = w;

      const done = state.answers.filter(v => v !== null).length;
      const pct = N ? (done / N) * 100 : 0;
      progressFill.style.width = pct + "%";
      progressDot.style.left = pct + "%";
      progressText.textContent = done + "/" + N;
    }

    function showFeedback(isCorrect, explain) {
      feedbackEl.style.display = "block";
      feedbackEl.classList.remove("good","bad");
      feedbackEl.classList.add(isCorrect ? "good" : "bad");
      fbTitleEl.textContent = isCorrect ? "âœ“ æ²’éŒ¯ï¼" : "âœ— å†æƒ³æƒ³ï½";
      fbTextEl.textContent = explain || "";
    }

    function hideFeedback() {
      feedbackEl.style.display = "none";
      feedbackEl.classList.remove("good","bad");
      fbTitleEl.textContent = "";
      fbTextEl.textContent = "";
    }

    function render() {
      setProgress();
      qTotalEl.textContent = "å…± " + N + " é¡Œ";

      const q = QUIZ[state.i];
      qIndexEl.textContent = "ç¬¬ " + (state.i + 1) + " é¡Œ";
      yearTagEl.textContent = String(q.year);
      qTextEl.textContent = q.q;

      // nav buttons
      btnBack.disabled = state.i === 0;
      btnNext.textContent = (state.i === N - 1) ? "å®Œæˆ" : "ä¸‹ä¸€é¡Œ";

      // options
      optsEl.innerHTML = "";
      const chosen = state.answers[state.i];
      const alreadyAnswered = chosen !== null;

      q.choices.forEach((text, idx) => {
        const btn = document.createElement("button");
        btn.className = "opt";
        btn.type = "button";
        btn.disabled = alreadyAnswered;

        const label = document.createElement("div");
        label.className = "label";
        label.textContent = String.fromCharCode(65 + idx);

        const span = document.createElement("div");
        span.style.flex = "1";
        span.textContent = text;

        btn.appendChild(label);
        btn.appendChild(span);

        // if answered, style
        if (alreadyAnswered) {
          const correctIdx = q.correct;
          if (idx === correctIdx) btn.classList.add("correct");
          else if (idx === chosen && chosen !== correctIdx) btn.classList.add("wrong");
          else btn.classList.add("dim");
        }

        btn.addEventListener("click", () => {
          if (state.answers[state.i] !== null) return;

          state.answers[state.i] = idx;
          const isCorrect = (idx === q.correct);
          state.corrects[state.i] = isCorrect;
          saveState();
          render();
          showFeedback(isCorrect, q.explain);
        });

        optsEl.appendChild(btn);
      });

      if (alreadyAnswered) {
        showFeedback(state.corrects[state.i] === true, q.explain);
      } else {
        hideFeedback();
      }

      // completion screen?
      const done = state.answers.every(v => v !== null);
      if (done && state.i === N - 1 && alreadyAnswered) {
        // allow finish button to open results
        btnNext.textContent = "å®Œæˆ";
      }
    }

    function showResult() {
      const {r,w} = score();
      cardEl.style.display = "none";
      resultEl.style.display = "block";
      el('finalScore').textContent = r + " / " + N;
      el('finalDetail').textContent = "ç­”å° " + r + " é¡Œï¼Œç­”éŒ¯ " + w + " é¡Œã€‚";

      // breakdown
      const years = [...new Set(QUIZ.map(q => q.year))];
      const wrap = el('yearBreakdown');
      wrap.innerHTML = "";
      years.forEach(y => {
        const idxs = QUIZ.map((q, i) => [q, i]).filter(([q,i]) => q.year === y).map(([q,i]) => i);
        let rr = 0, ww = 0;
        idxs.forEach(i => {
          if (state.corrects[i] === true) rr++;
          else if (state.corrects[i] === false) ww++;
        });
        const box = document.createElement("div");
        box.className = "mini";
        box.innerHTML = `<div class="y">${y} å¹´</div>
                         <div class="s">ç­”å° ${rr} / ${idxs.length} Â· ç­”éŒ¯ ${ww}</div>`;
        wrap.appendChild(box);
      });
    }

    btnBack.addEventListener("click", () => {
      if (state.i > 0) {
        state.i--;
        saveState();
        render();
      }
    });

    btnNext.addEventListener("click", () => {
      if (state.answers[state.i] === null) {
        toast("è«‹å…ˆä½œç­”å†å‰å¾€ä¸‹ä¸€é¡Œ");
        return;
      }
      if (state.i === N - 1) {
        showResult();
        return;
      }
      state.i++;
      saveState();
      render();
    });

    el('btnRestart').addEventListener("click", () => {
      state = { i: 0, answers: Array(N).fill(null), corrects: Array(N).fill(null) };
      clearState();
      cardEl.style.display = "block";
      resultEl.style.display = "none";
      render();
    });

    el('btnReview').addEventListener("click", () => {
      cardEl.style.display = "block";
      resultEl.style.display = "none";
      render();
    });

    // boot
    loadState();
    // if state.i out of range, reset
    if (typeof state.i !== "number" || state.i < 0 || state.i >= N) {
      state.i = 0;
    }
    render();
  </script>
</body>
</html>
